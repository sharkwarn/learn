function throttle(fn, time) {
    let preTime = 0;
    let lastTime = 0;
    return function(...arg) {
        let currentTime = new Date().getTime();
        lastTime = currentTime;
        if (currentTime - preTime > time) {
            fn.apply(this, arg);
            preTime = currentTime;
        } else {
            // 保证最后一次出发
            let self = this;
            setTimeout(function() {
                if (currentTime === lastTime) {
                    fn.apply(self, ...arg);
                }
            }, time)
        }
    }
}


const throttleFn = throttle(function(a) {
    console.log(a);
}, 1000);

let num = 0;

let timer = setInterval(function() {
    throttleFn(num);
    num++;
    if (num === 20) {
        clearInterval(timer);
    }
}, 100);


















































































































































































































































































































































