## 线程和进程的区别


来一句概括：

进程和线程都是一个时间段的描述，是CPU工作时间段的描述。

在cpu上所有的任务都是一个个轮流执行的。具体的轮流方法是：

先加载程序A的上下文，开始执行A，保存程序A的上下文，调入下一个要执行的程序B的上下文，开始执行程序B，保存B的上下问。

<b>进程就是包括上下文切换的程序执行时间总和 = CPU加载上下文 + CPU执行 + CPU保存上下文</b>

- 线程

进程的颗粒度太大，每次都要有上下的调入，保存，调出。如果我们把进程比喻为一个运行在电脑上的软件，那么一个软件的执行不可能是一条逻辑执行的，必定有多个分支和多个程序段，就好比要实现程序A，实际分成 a，b，c等多个块组合而成。那么这里具体的执行就可能变成：

程序A得到CPU =》CPU加载上下文，开始执行程序A的a小段，然后执行A的b小段，然后再执行A的c小段，最后CPU保存A的上下文。

这里a，b，c的执行是共享了A的上下文，CPU在执行的时候没有进行上下文切换的。这里的a，b，c就是线程，也就是说线程是共享了进程的上下文环境，的更为细小的CPU时间段。


### 普及下并行和并发

- 并发：当有多个线程在操作时,如果系统只有一个CPU,则它根本不可能真正同时进行一个以上的线程，它只能把CPU运行时间划分成若干个时间段,再将时间 段分配给各个线程执行，在一个时间段的线程代码运行时，其它线程处于挂起状。.这种方式我们称之为并发(Concurrent)。

- 并行：当系统有一个以上CPU时,则线程的操作有可能非并发。当一个CPU执行一个线程时，另一个CPU可以执行另一个线程，两个线程互不抢占CPU资源，可以同时进行，这种方式我们称之为并行(Parallel)。



### 参考
[https://www.zhihu.com/question/25532384/answer/81152571](https://www.zhihu.com/question/25532384/answer/81152571)
[https://www.zhihu.com/question/271821176/answer/364029483](https://www.zhihu.com/question/271821176/answer/364029483)