## æ‘˜è¦


### å®šä¹‰æ™®é€šç±»å‹ã€‚

```javascript
const a: string = '1';
const b: string | number = 1;
```

### Array

```javascript
const list1: number[] = [1, 3, 4];
const list2: Array<number> = [1];
```

### å…ƒç»„ Tuple
å…ƒç»„ç±»å‹å…è®¸è¡¨ç¤ºä¸€ä¸ªå·²çŸ¥å…ƒç´ æ•°é‡å’Œç±»å‹çš„æ•°ç»„ï¼Œå„å…ƒç´ çš„ç±»å‹ä¸å¿…ç›¸åŒã€‚

```javascript
const list3: [string, number] = ['1', 2];
type List = [string, number]
const list4 = ['1', 2];
```

### æšä¸¾ enum

```javascript
enum Color { Red = 1, Green, Blue };
```

### any

ğŸˆ¯ï¸ä»»æ„ç±»å‹
ç›¸æ¯”è¾ƒObjectç±»å‹ï¼ŒObjectç±»å‹å€¼å…è®¸è®¸å¤åˆ¶ä¸å¯ä»¥è°ƒç”¨ä»»æ„æ–¹æ³•ã€‚

```javascript
const obj: any = { a: 1 };
obj.a.toString()

const obj2: Object = { a: 1 };
// obj2.a.toString()// Error
```

### void

ä¸anyç›¸åï¼Œè¡¨ç¤ºæ²¡æœ‰ä»»ä½•ç±»å‹ã€‚

```javascript
function func(): void {
  console.log(111);
}
```

###  Null & Undefined

```javascript
const nul1: null = null;
const nul2: number = null;
```

### Neverè¡¨ç¤ºæ°¸è¿œä¸å­˜åœ¨çš„ç±»å‹

```javascript
while(true){}
```

### ç±»å‹æ–­è¨€

è¡¨ç¤ºçš„æ„æ€ï¼Œè™½ç„¶ä¹‹å‰å£°æ˜äº†è¿™ä¸ªå€¼çš„ç±»å‹ï¼Œä½†æ˜¯å¯ä»¥ç¡®å®šè¿™ä¸ªå€¼ç±»å‹æ˜¯å¦ä¸€ç§ã€‚

```javascript
let someValue: any = "this is a string";

let strLength2: number = (someValue as string).length;

let strLength: number = (<string>someValue).length;
```

### æ¥å£

```javascript
interface LabelledValue {
  label: string;
}

function printLabel(labelledObj: LabelledValue) {
  console.log(labelledObj.label);
}

let myObj = { size: 10, label: "Size 10 Object" };
printLabel(myObj);

// å¯é€‰å±æ€§

interface Obj {
  width?: number,
  height?: number
}

// åªè¯»å±æ€§
interface Read {
  readonly size: number
}

```

### åªè¯»å±æ€§ç”¨æ¥æè¿°æ•°ç»„ï¼ˆReadonlyArray<T>ï¼‰ï¼Œä¼šæŠŠæ“ä½œæ•°ç»„çš„æ–¹æ³•éƒ½å»æ‰ï¼Œç¡®ä¿åˆ›å»ºåçš„æ•°ç»„å†ä¹Ÿä¸èƒ½è¢«ä¿®æ”¹

```javascript
let readonly1: number[] = [1, 2, 3, 4];
let readonly2: ReadonlyArray<number> = readonly1;
//ro[0] = 12; // error!
//ro.push(5); // error!
//ro.length = 100; // error!
//a = ro; // error!

// å¦‚æœæŠŠReadonlyArray<T>å˜æˆæ™®é€šçš„æ•°ç»„
readonly2 as number[];

```

### å‡½æ•°ç±»å‹

```javascript
interface SearchFunc {
  (source: string, subString: string): boolean;
}
let mySearch: SearchFunc;
mySearch = function (source: string, subString: string) {
  let result = source.search(subString);
  return result > -1;
}

```

### å¯ç´¢å¼•çš„ç±»å‹, æ³¨æ„ç´¢å¼•ç±»å‹çš„å€¼æ˜¯åªè¯»çš„ã€‚

```javascript
interface StringArray {
  [index: number]: string;
}

let myArray: StringArray;
myArray = ["Bob", "Fred"];

let myStr: string = myArray[0];

```

### ç±»ç±»å‹

```javascript
interface Parent {
  value: number;
}

class Child implements Parent {
  value: 1;
  label: 'string'
}



interface ClockConstructor {
  new(hour: number, minute: number): ClockInterface;
}
interface ClockInterface {
  tick(): void;
}

function createClock(ctor: ClockConstructor, hour: number, minute: number): ClockInterface {
  return new ctor(hour, minute);
}

class DigitalClock implements ClockInterface {
  constructor(h: number, m: number) { }
  tick() {
    console.log("beep beep");
  }
}
class AnalogClock implements ClockInterface {
  constructor(h: number, m: number) { }
  tick() {
    console.log("tick tock");
  }
}

let digital = createClock(DigitalClock, 12, 17);
let analog = createClock(AnalogClock, 7, 32);


```

### ç»§æ‰¿æ¥å£

```javascript
interface Parent1 {
  value: number
}
interface Parent1_2 {
  key: string
}

interface Child1 extends Parent1 {
  label: string
}

const obj3: Child1 = {
  value: 1,
  label: '2'
}

// æ¢ä¸€ç§æ–¹å¼

const obj4 = <Child1>{};
obj4.value = 1;
obj4.label = '1';

// ç»§æ‰¿å¤šä¸ª

interface Child1_2 extends Parent1, Parent1_2 {
  label: string
}

```

### æ··åˆå±æ€§

```javascript
interface Counter {
  (start: number): string;
  interval: number;
  reset(): void;
}

function getCounter(): Counter {
  let counter = <Counter>function (start: number) { };
  counter.interval = 123;
  counter.reset = function () { };
  return counter;
}
```

### æ¥å£ç»§æ‰¿ç±»

```javascript
class Control {
  private state: any;
}

// è¿™ä¸ªåœ°æ–¹ä»£è¡¨çš„æ„æ€æ˜¯ï¼Œå±æ€§å¿…é¡»è¦ç»§æ‰¿Control
interface SelectableControl extends Control {
  select(): void;
}

class Button extends Control implements SelectableControl {
  select() { }
}

class TextBox extends Control {
  select() { }
}

class Image2_Parent {
  private state: any;
}

// è¿™ä¸ªåœ°æ–¹åªèƒ½ç»§æ‰¿ä¸Controlï¼Œä¸å¯ä»¥è‡ªå·±è®¾ç½®ï¼ˆè‡ªå·±è¿™æ ·è®¤ä¸ºï¼‰
class Image2 extends Control implements SelectableControl {
  select() { }
}
```

### ç±»

```javascript
class Greeter {
  greeting: string;
  constructor(message: string) {
    this.greeting = message;
  }
  greet() {
    return "Hello, " + this.greeting;
  }
}

let greeter = new Greeter("world");

// ç»§æ‰¿å’Œjsä¸€æ ·ã€‚

//å…¬å…±ï¼Œç§æœ‰ä¸å—ä¿æŠ¤çš„ä¿®é¥°ç¬¦ 
// tséƒ½é»˜è®¤ä¸º public

class Animal {
  public name: string;
  public constructor(theName: string) { this.name = theName; }
  public move(distanceInMeters: number) {
    console.log(`${this.name} moved ${distanceInMeters}m.`);
  }
}

// ç§æœ‰
class Animal2 {
  private name: string;
  constructor(theName: string) { this.name = theName; }
}

// new Animal2("Cat").name; // é”™è¯¯: 'name' æ˜¯ç§æœ‰çš„.

class Child_Animal2 extends Animal2 {
  type: string;
  constructor() {
    super('props');
    // this.type = this.name;// error åœ¨è‡ªç±»å‹ä¸­ä¾ç„¶ä¸å¯ä»¥è®¿é—®çˆ¶ç±»ä¸­çš„ç§æœ‰å±æ€§
  }
}


```

### protected åœ¨æ´¾ç”Ÿç±»ä¸­ä»ç„¶å¯ä»¥è®¿é—®ã€‚

```javascript
class Person {
  protected name: string;
  constructor(name: string) {
    this.name = name;
  }
}

class Boy extends Person {
  constructor(name: string) {
    super(name);
    console.log(this.name);
  }
}
```

### æ„é€ å‡½æ•°ä¹Ÿå¯ä»¥è¢«æ ‡è®°æˆ protectedã€‚ è¿™æ„å‘³ç€è¿™ä¸ªç±»ä¸èƒ½åœ¨åŒ…å«å®ƒçš„ç±»å¤–è¢«å®ä¾‹åŒ–ï¼Œä½†æ˜¯èƒ½è¢«ç»§æ‰¿


```javascript
class Person2 {
  protected name: string;
  protected constructor(theName: string) { this.name = theName; }
}
```

### readonlyä¿®é¥°ç¬¦
å…³é”®å­—å°†å±æ€§è®¾ç½®ä¸ºåªè¯»çš„ã€‚ åªè¯»å±æ€§å¿…é¡»åœ¨å£°æ˜æ—¶æˆ–æ„é€ å‡½æ•°é‡Œè¢«åˆå§‹åŒ–ã€‚

```javascript
class Octopus {
  readonly name: string;
  readonly numberOfLegs: number = 8;
  constructor(theName: string) {
    this.name = theName;
  }
  change(str: string): void {
    //this.name = str;// ä¹Ÿæ˜¯é”™çš„ï¼Œåªæœ‰åœ¨constructoré‡Œé¢æ‰å¯ä»¥è¢«å£°æ˜ã€‚
  }
}
let dad = new Octopus("Man with the 8 strong legs");
// dad.name = "Man with the 3-piece suit"; // é”™è¯¯! name æ˜¯åªè¯»çš„.

```

### å­˜å–å™¨

```javascript
class Employee {
  private _fullName: string;

  get fullName(): string {
    return this._fullName;
  }

  set fullName(newName: string) {
    this._fullName = newName;
  }
}

// åªå¸¦æœ‰ getä¸å¸¦æœ‰ setçš„å­˜å–å™¨è‡ªåŠ¨è¢«æ¨æ–­ä¸º readonly

```

### é™æ€å±æ€§

```javascript
class Grid {
  static origin = { x: 0, y: 0 };
}
```

### æŠ½è±¡ç±»

```javascript
abstract class Animal3 {
  abstract makeSound(): void;// å­ç±»ä¸­å¿…é¡»å£°æ˜è¯¥å‡½æ•°
  move(): void {
    console.log('roaming the earch...');
  }
}

class Animal4 extends Animal3 {
  makeSound() { }
}
```

### æŠŠç±»å½“åšæ¥å£ä½¿ç”¨

```javascript
class Point {
  x: number;
  y: number;
}

interface Point3d extends Point {
  z: number;
}
let point3d: Point3d = { x: 1, y: 2, z: 3 };


```

### å‡½æ•°é‡è½½

```javascript
//  JavaScripté‡Œå‡½æ•°æ ¹æ®ä¼ å…¥ä¸åŒçš„å‚æ•°è€Œè¿”å›ä¸åŒç±»å‹çš„æ•°æ®
function pickCard(x: { suit: string; card: number; }[]): number;
function pickCard(x: number): { suit: string; card: number; };
// ä¸‹é¢è¿™ä¸ªxæç¤ºé”™è¯¯ï¼Œä¸çŸ¥é“åŸå› 
function pickCard(x: any): any {
  // Check to see if we're working with an object/array
  // if so, they gave us the deck and we'll pick the card
  if (typeof x == "object") {
    let pickedCard = Math.floor(Math.random() * x.length);
    return pickedCard;
  }
  // Otherwise just let them pick the card
  else if (typeof x == "number") {
    let pickedSuit = Math.floor(x / 13);
    return {};
  }
}
```

### æ³›å‹

ä¸»è¦ä¸ºäº†è€ƒè™‘å¯é‡ç”¨æ€§

ä¾‹å¦‚ä¸€ä¸ªæ–¹æ³•

```javascript
function identity(x: number): number {
  return x + 1;
}
function identity2(x: string): string {
  return x + 1;
}
```

ä½¿ç”¨anyçš„è¯ä¼šä½¿è¿™ä¸ªå‚æ•°å¯ä»¥æ¥æ”¶ä»»ä½•ç±»å‹çš„å‚æ•°ã€‚

æ³›å‹ä¸Šåœº

### 

```javascript
function identity3<T>(x: T): T {
  return x;
}
let output = identity3<number>(2);
// ä¸åˆ¶å®šç±»å‹åˆ™æ ¹æ®å‚æ•°è‡ªè¡Œåˆ¤æ–­ã€‚
let output2 = identity3(2);
```

ä½¿ç”¨æ³›å‹å˜é‡

å› ä¸ºæ²¡æœ‰åˆ¶å®šTçš„ç±»å‹ï¼Œæ‰€ä»¥ä¹Ÿä¸èƒ½ä½¿ç”¨Tçš„æ–¹æ³•ã€‚
```javascript
// è¿™é‡Œæ˜¯å› ä¸ºæŒ‡å®šä¸ºæ•°ç»„
function identity4<T>(x: T[]): T[] {
  console.log(x.length);
  return x;
}

function identity5<T>(x: Array<T>): T[] {
  console.log(x.length);
  return x;
}
```

### æ³›å‹ç±»å‹

```javascript

function identity6<T>(arg: T): T {
  return arg;
}

// ä¸­é—´çš„é‚£ä¸ªåŒºåŸŸæ˜¾ç¤ºçš„å‡½æ•°çš„
let myIdentity: <T>(arg: T) => T = identity6;

//æ ¹æ®ä¸Šé¢çš„ä¾‹å­å†™å‡ºæ³›å‹çš„æ¥å£

interface func {
  <T>(arg: T): T
}

function func1<T> (x: T): T {
  return x;
}

const funca: func = func1;

```

ç¤ºä¾‹åšäº†å°‘è®¸æ”¹åŠ¨ã€‚ ä¸å†æè¿°æ³›å‹å‡½æ•°ï¼Œè€Œæ˜¯æŠŠéæ³›å‹å‡½æ•°ç­¾åä½œä¸ºæ³›å‹ç±»å‹ä¸€éƒ¨åˆ†ã€‚ å½“æˆ‘ä»¬ä½¿ç”¨ GenericIdentityFnçš„æ—¶å€™ï¼Œè¿˜å¾—ä¼ å…¥ä¸€ä¸ªç±»å‹å‚æ•°æ¥æŒ‡å®šæ³›å‹ç±»å‹ï¼ˆè¿™é‡Œæ˜¯ï¼šnumberï¼‰ï¼Œé”å®šäº†ä¹‹åä»£ç é‡Œä½¿ç”¨çš„ç±»å‹ã€‚ å¯¹äºæè¿°å“ªéƒ¨åˆ†ç±»å‹å±äºæ³›å‹éƒ¨åˆ†æ¥è¯´ï¼Œç†è§£ä½•æ—¶æŠŠå‚æ•°æ”¾åœ¨è°ƒç”¨ç­¾åé‡Œå’Œä½•æ—¶æ”¾åœ¨æ¥å£ä¸Šæ˜¯å¾ˆæœ‰å¸®åŠ©çš„ã€‚

```javascript
// æˆ–è€…
function func1<T> (x: T): T {
  return x;
}
interface func2<T> {
  (arg: T): T
}
const funcB: func2<number> = func1;
```

### æ³›å‹ç±»

```javascript

class GenericNumber<T> {
  zeroValue: T;
  add: (x: T, y: T) => T;
}

let myGenericNumber = new GenericNumber<number>();
myGenericNumber.zeroValue = 0;
myGenericNumber.add = function(x, y) { return x + y; };


new GenericNumber<number>();


```

### æ³›å‹çº¦æŸ

```javascript


interface Lengthwise {
  length: number;
}

function loggingIdentity<T extends Lengthwise>(arg: T): T {
  console.log(arg.length);  // Now we know it has a .length property, so no more error
  return arg;
}

//ç°åœ¨è¿™ä¸ªæ³›å‹å‡½æ•°è¢«å®šä¹‰äº†çº¦æŸï¼Œå› æ­¤å®ƒä¸å†æ˜¯é€‚ç”¨äºä»»æ„ç±»å‹ï¼š
loggingIdentity(3);  // Error,
```

### åœ¨æ³›å‹é‡Œä½¿ç”¨ç±»ç±»å‹

```javascript
class BeeKeeper {
  hasMask: boolean;
}

class ZooKeeper {
  nametag: string;
}

class Animal7 {
  numLegs: number;
}

class Bee extends Animal7 {
  keeper: BeeKeeper;
}

class Lion extends Animal7 {
  keeper: ZooKeeper;
}

function createInstance<A extends Animal7>(c: new () => A): A {
  return new c();
}

createInstance(Lion).keeper.nametag;  // typechecks!
createInstance(Bee).keeper.hasMask;   // typechecks!

```

### 

```javascript
```

### 

```javascript
```

### 

```javascript
```


### type(æ¥å£)å’Œinterface(ç±»å‹åˆ«å)åŒºåˆ«

- 1.type ä¹Ÿå¯ä»¥ç”¨äºå…¶ä»–ç±»å‹ï¼Œä¾‹å¦‚åŸºå…ƒï¼Œå¹¶é›†å’Œå…ƒç»„ã€‚

```javascript
// primitive
type Name = string;

// object
type PartialPointX = { x: number; };
type PartialPointY = { y: number; };

// union
type PartialPoint = PartialPointX | PartialPointY;

// tuple
type Data = [number, string];
```


- 2. ä¸¤è€…éƒ½å¯ä»¥æ‰©å±•ï¼Œä½†æ˜¯è¯­æ³•ä¹Ÿæœ‰æ‰€ä¸åŒã€‚æ­¤å¤–ï¼Œè¯·æ³¨æ„ï¼Œæ¥å£å’Œç±»å‹åˆ«åä¸æ˜¯äº’æ–¥çš„ã€‚æ¥å£å¯ä»¥æ‰©å±•ç±»å‹åˆ«åï¼Œåä¹‹äº¦ç„¶ã€‚
  
```javascript
// interfaceæ‰©å±•æ¥å£
interface PartialPointX {
    x: number;
}
interface Point extends PartialPointX {
    y: number;
}

// type æ‰©å±• type
type PartialPointX = {
    x: number;
};
type Point = PartialPointX & { y: number; };

// interface æ‰©å±• type
type PartialPointX = { x: number; };
interface Point extends PartialPointX { y: number; }

// type æ‰©å±• interface

interface PartialPointX { x: number; }
type Point = PartialPointX & { y: number; };
```



## é¢„å®šä¹‰çš„æœ‰æ¡ä»¶ç±»å‹

TypeScript 2.8åœ¨lib.d.tsé‡Œå¢åŠ äº†ä¸€äº›é¢„å®šä¹‰çš„æœ‰æ¡ä»¶ç±»å‹ï¼š

Exclude<T, U> -- ä»Tä¸­å‰”é™¤å¯ä»¥èµ‹å€¼ç»™Uçš„ç±»å‹ã€‚
Extract<T, U> -- æå–Tä¸­å¯ä»¥èµ‹å€¼ç»™Uçš„ç±»å‹ã€‚
NonNullable<T> -- ä»Tä¸­å‰”é™¤nullå’Œundefinedã€‚
ReturnType<T> -- è·å–å‡½æ•°è¿”å›å€¼ç±»å‹ã€‚
InstanceType<T> -- è·å–æ„é€ å‡½æ•°ç±»å‹çš„å®ä¾‹ç±»å‹ã€‚

```javascript
type T00 = Exclude<"a" | "b" | "c" | "d", "a" | "c" | "f">;  // "b" | "d"
type T01 = Extract<"a" | "b" | "c" | "d", "a" | "c" | "f">;  // "a" | "c"

type T02 = Exclude<string | number | (() => void), Function>;  // string | number
type T03 = Extract<string | number | (() => void), Function>;  // () => void

type T04 = NonNullable<string | number | undefined>;  // string | number
type T05 = NonNullable<(() => string) | string[] | null | undefined>;  // (() => string) | string[]

function f1(s: string) {
    return { a: 1, b: s };
}

class C {
    x = 0;
    y = 0;
}

type T10 = ReturnType<() => string>;  // string
type T11 = ReturnType<(s: string) => void>;  // void
type T12 = ReturnType<(<T>() => T)>;  // {}
type T13 = ReturnType<(<T extends U, U extends number[]>() => T)>;  // number[]
type T14 = ReturnType<typeof f1>;  // { a: number, b: string }
type T15 = ReturnType<any>;  // any
type T16 = ReturnType<never>;  // any
type T17 = ReturnType<string>;  // Error
type T18 = ReturnType<Function>;  // Error

type T20 = InstanceType<typeof C>;  // C
type T21 = InstanceType<any>;  // any
type T22 = InstanceType<never>;  // any
type T23 = InstanceType<string>;  // Error
type T24 = InstanceType<Function>;  // Error
```